# DSD Music Converter - Default Configuration

# Conversion Settings
conversion:
  # Mode: 'iso_dsf_to_flac' or 'iso_to_dsf'
  mode: iso_dsf_to_flac
  
  # Sample rate options: 88200, 96000, 176400, 192000 (Hz)
  sample_rate: 88200
  
  # Bit depth (only for PCM/FLAC conversion)
  bit_depth: 24
  
  # Audio filter settings for high-quality resampling
  audio_filter:
    # Resampler: 'soxr' (high quality) or 'swr' (standard)
    resampler: soxr
    
    # SoX resampler precision (20-28, higher is better)
    soxr_precision: 28
    
    # Dither method: 'triangular', 'rectangular', 'none'
    dither_method: triangular
    
    # Lowpass filter frequency (Hz) - removes ultrasonic content
    # Set to 0 to disable
    lowpass_freq: 40000
  
  # FLAC compression level (0-12, higher is smaller file but slower)
  flac_compression_level: 8
  
  # Preserve metadata from source files
  preserve_metadata: true
  
  # FLAC Standardization (standardize FLAC files to 24/88.2)
  flac_standardization:
    # Enable FLAC to FLAC conversion
    enabled: false
    
    # Behavior for higher-quality files (e.g., 24/192, 32/96)
    # 'downsample': Convert to 24/88.2
    # 'skip': Leave higher-quality files unchanged
    higher_quality_behavior: skip

# Paths
paths:
  # Input directory containing music files to convert (required)
  input_dir: /Volumes/PrimaryHD_8TB/ConversionTest/IN
  
  # Archive location for original files (required)
  archive_dir: /Volumes/PrimaryHD_8TB/ConversionTest/Archive
  
  # Output directory (null = same as input)
  output_dir: null
  
  # Working directory for temporary processing
  # Albums are copied here during conversion for atomic operations
  # Default: ./working (relative to current directory)
  working_dir: ./working

# Database Settings
database:
  # Enable database tracking
  enabled: true
  
  # Database file path
  path: ./music_catalog.duckdb

# Metadata Enrichment (optional)
metadata:
  # Enable metadata enrichment
  enabled: false
  
  # Sources to use (in order of preference)
  sources:
    - musicbrainz
    - discogs
  
  # Discogs API credentials (required for Discogs)
  discogs:
    user_token: XNbUcrppaAqcGWzpVdjVrnXFIMkHDyWeiGMFdShU
  
  # What to enrich
  enrich:
    - artist
    - album
    - title
    - track_number
    - date
    - genre
    - label
    - catalog_number
  
  # Behavior: 'fill_missing' or 'overwrite'
  behavior: fill_missing
  
  # Write SACD metadata to output FLAC files
  # If SACD text metadata is found, writes label, catalog number, genre, etc. to FLAC tags
  write_sacd_to_flac: true

# Processing Options
processing:
  # Maximum retry attempts per file
  max_retries: 3
  
  # Skip album if any file fails after retries
  skip_album_on_error: true
  
  # Check for pause signal between albums
  check_pause: true
  
  # Pause signal file location
  pause_signal_file: .state/PAUSE
  
  # Remove source files after successful archiving and conversion
  # CAUTION: This permanently deletes the originals from input directory
  # Only use if you trust your archive and conversion process
  remove_source_after_conversion: true
  
  # Mac Mini M1 Optimization: FFmpeg threads (8 cores: 4 performance + 4 efficiency)
  ffmpeg_threads: 8
  
  # Skip albums that have already been processed
  skip_processed: true
  
  # Verify checksums when checking for processed albums
  verify_checksums: true
  
  # Calculate dynamic range metrics during conversion
  calculate_dynamic_range: true
  
  # Working directory management
  # Clean up working directories after successful conversion
  cleanup_working_on_success: true
  
  # Clean up working directories after failed conversion
  # Set to false to keep working directories for resume/debugging
  cleanup_working_on_failure: false
  
  # Resume from working directories on --resume
  # If true, checks for existing working directories and continues from there
  resume_from_working: true

# I/O Optimization for External Drives
io:
  # Buffer sizes for external drive performance (MB)
  read_buffer_mb: 32
  write_buffer_mb: 32
  
# macOS Specific Settings
macos:
  # Prevent system sleep during conversion
  prevent_sleep: true
  
  # Use low-priority I/O (set to true if system feels sluggish during conversion)
  low_priority_io: false

# Logging
logging:
  # Log level: DEBUG, INFO, WARNING, ERROR
  level: INFO
  
  # Log file location
  log_file: conversion.log
  
  # Error log file location
  error_log_file: conversion_errors.log
  
  # Include timestamps in console output
  console_timestamps: true

# File Handling
files:
  # Extensions to treat as music files
  music_extensions:
    - .iso
    - .dsf
    - .dff
    - .flac
  
  # Extensions to copy as-is (non-music files)
  copy_extensions:
    - .jpg
    - .jpeg
    - .png
    - .pdf
    - .txt
    - .log
    - .cue
    - .m3u

